<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="FOSS Glossary - A gamified glossary of FOSS terms with humor. Search, favorite, and share terms offline."
    />
    <meta
      name="keywords"
      content="FOSS, open source, glossary, PWA, offline, progressive web app"
    />
    <meta name="author" content="LuminLynx" />
    <meta name="theme-color" content="#1a3a52" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="FOSS Glossary" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="FOSS Glossary - Progressive Web App" />
    <meta
      property="og:description"
      content="Search, favorite, and share FOSS terms offline. A gamified glossary with humor!"
    />
    <!-- TODO: Replace [YOUR-DOMAIN] with actual deployment URL before production -->
    <meta
      property="og:image"
      content="https://[YOUR-DOMAIN]/docs/pwa/assets/preview/social-preview.png"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="FOSS Glossary - Progressive Web App" />
    <meta
      name="twitter:description"
      content="Search, favorite, and share FOSS terms offline. A gamified glossary with humor!"
    />
    <!-- TODO: Replace [YOUR-DOMAIN] with actual deployment URL before production -->
    <meta
      name="twitter:image"
      content="https://[YOUR-DOMAIN]/docs/pwa/assets/preview/social-preview.png"
    />

    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/icons/icon-180.png" />

    <!-- Manifest -->
    <link rel="manifest" href="./manifest.json" />

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/icons/favicon-32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/icons/favicon-16.png" />
    <link rel="icon" type="image/svg+xml" href="./assets/icons/favicon.svg" />

    <title>FOSS Glossary - PWA</title>

    <!-- Styles -->
    <link rel="stylesheet" href="./styles/main.css" />

    <!-- iOS splash screens -->
    <link
      rel="apple-touch-startup-image"
      media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="./assets/splash/splash-1170x2532.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="./assets/splash/splash-1179x2556.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="./assets/splash/splash-1284x2778.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="(device-width: 834px) and (device-height: 1194px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)"
      href="./assets/splash/splash-1668x2388.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="(device-width: 1024px) and (device-height: 1366px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)"
      href="./assets/splash/splash-2048x2732.png"
    />
  </head>
  <body>
    <!-- Fallback for non-JS users -->
    <noscript>
      <div
        style="
          padding: 2rem;
          text-align: center;
          background: #fff3cd;
          color: #856404;
          border: 1px solid #ffeaa7;
        "
      >
        <strong>JavaScript Required:</strong> This app requires JavaScript to load and display
        terms. Please enable JavaScript in your browser settings.
      </div>
    </noscript>

    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="header-top">
          <div class="logo-section">
            <img src="./assets/icons/icon-512.png" alt="FOSS Glossary Logo" class="logo" />
            <div>
              <h1 class="title">FOSS Glossary</h1>
              <p class="subtitle">Search, Learn, and Share Offline</p>
            </div>
          </div>
          <div class="header-controls">
            <button
              id="drafter-toggle"
              class="drafter-toggle"
              aria-label="Create new term"
              title="Create new term with AI"
            >
              âœï¸ Create Term
            </button>
            <button
              id="theme-toggle"
              class="theme-toggle"
              aria-label="Toggle theme"
              aria-pressed="false"
            >
              â˜€ï¸ Light
            </button>
            <button
              id="favorites-toggle"
              class="favorites-toggle"
              aria-label="Toggle favorites view"
              aria-pressed="false"
            >
              â­ Favorites
            </button>
          </div>
        </div>
        <div class="search-section">
          <input
            type="search"
            id="search-input"
            class="search-box"
            placeholder="Search terms, definitions, tags... (Ctrl+K)"
            autocomplete="off"
            role="searchbox"
            aria-label="Search terms"
          />
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="container">
      <!-- Stats Bar -->
      <div id="stats-bar" class="stats-bar">
        <div class="stat-item">
          <div class="stat-value" aria-live="polite">0</div>
          <div class="stat-label">Total Terms</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" aria-live="polite">0</div>
          <div class="stat-label">Favorites</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" aria-live="polite">0</div>
          <div class="stat-label">Showing</div>
        </div>
      </div>

      <!-- Terms Grid -->
      <div id="terms-grid" class="terms-grid">
        <div class="loading">Loading terms...</div>
      </div>

      <!-- Footer with version -->
      <footer class="app-footer">
        <div class="footer-buttons">
          <a
            href="https://luminlynx.github.io/FOSS-Glossary/"
            target="_blank"
            rel="noopener noreferrer"
            class="footer-btn"
            aria-label="Visit FOSS Glossary landing page"
          >
            ğŸ“– Landing Page
          </a>
          <a
            href="https://github.com/LuminLynx/FOSS-Glossary"
            target="_blank"
            rel="noopener noreferrer"
            class="footer-btn"
            aria-label="View FOSS Glossary source code on GitHub"
          >
            ğŸ’» GitHub Repository
          </a>
        </div>
        <div class="footer-content">
          <span id="app-version" class="app-version">v1.0.0</span>
        </div>
      </footer>
    </main>

    <!-- Term Drafter Modal -->
    <div
      id="drafter-modal"
      class="drafter-modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="drafter-modal-title"
      aria-hidden="true"
    >
      <div class="drafter-modal-content">
        <div class="drafter-header">
          <h2 id="drafter-modal-title">âœ¨ AI Term Drafter</h2>
          <button id="close-drafter" class="close-drafter-btn" aria-label="Close term drafter">
            âœ•
          </button>
        </div>

        <div class="drafter-steps">
          <!-- Step 1: Input -->
          <div class="drafter-step active" data-step="1">
            <div class="drafter-api-key-section">
              <label for="api-key-input">GitHub Models API Key</label>
              <div class="api-key-input-wrapper">
                <input
                  type="password"
                  id="api-key-input"
                  placeholder="Enter your GitHub Models API key"
                  autocomplete="off"
                />
                <button
                  id="toggle-api-key"
                  class="toggle-key-btn"
                  aria-label="Toggle key visibility"
                >
                  ğŸ‘ï¸
                </button>
              </div>
              <p class="api-key-hint">
                Your key is stored locally and never sent to our servers.
                <a
                  href="https://github.com/settings/tokens"
                  target="_blank"
                  rel="noopener noreferrer"
                  >Get an API key</a
                >
              </p>
            </div>

            <label for="term-input">Term Name</label>
            <input
              type="text"
              id="term-input"
              placeholder="e.g., 'Technical Debt'"
              autocomplete="off"
            />

            <label for="context-input">Additional Context (optional)</label>
            <textarea
              id="context-input"
              placeholder="Any specific angle or details you want the definition to focus on..."
              rows="3"
            ></textarea>

            <button id="generate-btn" class="primary-btn">ğŸ¤– Generate with AI</button>
          </div>

          <!-- Step 2: Preview & Edit -->
          <div class="drafter-step" data-step="2">
            <div id="term-preview" class="term-preview"></div>
            <div class="drafter-actions">
              <button id="edit-btn" class="secondary-btn">âœï¸ Edit YAML</button>
              <button id="copy-yaml-btn" class="secondary-btn">ğŸ“‹ Copy YAML</button>
              <button id="submit-btn" class="primary-btn">ğŸ“¤ Create PR</button>
            </div>
            <button id="back-to-input" class="back-btn">â† Back to Input</button>
          </div>

          <!-- Step 3: Edit YAML -->
          <div class="drafter-step" data-step="3">
            <label for="yaml-editor">Edit YAML</label>
            <textarea id="yaml-editor" class="yaml-editor" rows="15"></textarea>
            <div class="drafter-actions">
              <button id="save-edit-btn" class="primary-btn">ğŸ’¾ Save Changes</button>
              <button id="cancel-edit-btn" class="secondary-btn">Cancel</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Share Modal -->
    <div
      id="share-modal"
      class="share-modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="share-modal-title"
      aria-hidden="true"
    >
      <div class="share-modal-content">
        <h3 id="share-modal-title" class="share-modal-title">Share This Term</h3>
        <div id="share-modal-text" class="share-modal-text"></div>
        <div class="share-buttons">
          <button id="share-copy" class="share-btn-modal">ğŸ“‹ Copy Link</button>
          <button id="share-twitter" class="share-btn-modal">ğŸ¦ Twitter</button>
          <button id="share-linkedin" class="share-btn-modal">ğŸ’¼ LinkedIn</button>
          <button id="share-text" class="share-btn-modal">ğŸ“ Copy Text</button>
        </div>
        <button id="close-share-modal" class="close-modal">Close</button>
      </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <!-- Update Notification Banner -->
    <div
      id="update-banner"
      class="update-banner"
      role="alert"
      aria-live="assertive"
      style="display: none"
    >
      <div class="update-banner-content">
        <span class="update-icon">ğŸ”„</span>
        <span class="update-text">A new version is available!</span>
        <button id="update-reload-btn" class="update-btn">Reload</button>
        <button id="update-dismiss-btn" class="update-dismiss-btn" aria-label="Dismiss">âœ•</button>
      </div>
    </div>

    <!-- API Handler for Term Drafter -->
    <script src="./api-handler.js"></script>

    <!-- App Script -->
    <script src="./app.js"></script>
  </body>
</html>
